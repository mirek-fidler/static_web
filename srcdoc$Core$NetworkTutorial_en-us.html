<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="en-us">
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="U++ HTML Package">
<META NAME="Description" CONTENT="Moreover, the examples attached to this tutorial are bundled with the U++ standard distribution, and they are localized in the tutorial assembly.">
<TITLE>U++ Network Tutorial :: U++</TITLE>
<STYLE TYPE="text/css"><!--
.A{margin:0px 0px 0px 0px;text-indent:0px;text-align:left;color:#000000;font-family:sans-serif;font-size:10pt;font-weight:normal;font-style:normal;}
.B{font-size:12pt;}
.C{margin:0px 0px 16px 0px;text-indent:0px;text-align:left;color:#000000;font-family:serif;font-size:24pt;font-weight:bold;font-style:normal;}
.D{margin:8px 0px 8px 0px;text-indent:0px;text-align:left;color:#000000;font-family:sans-serif;font-size:10pt;font-weight:normal;font-style:normal;line-height:150%}
.E{margin:16px 0px 0px 0px;text-indent:0px;text-align:left;color:#000000;font-family:sans-serif;font-size:16pt;font-weight:bold;font-style:normal;}
.F{font-weight:bold;}
.G{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#0000ff;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;}
.H{color:#8000ff;}
.I{color:#000000;}
.J{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;}
.K{color:#0000ff;font-weight:bold;}
.L{color:#800000;}
.M{color:#0000ff;}
.N{color:#8000ff;font-weight:bold;}
.O{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#008000;font-family:monospace;font-size:10pt;font-weight:normal;font-style:italic;}
.P{color:#000000;font-style:normal;}
.Q{display:list-item;list-style-type:disc;margin:8px 0px 8px 84px;text-indent:0px;text-align:left;color:#000000;font-family:sans-serif;font-size:10pt;font-weight:normal;font-style:normal;line-height:150%}
.R{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:10pt;font-weight:bold;font-style:normal;}
.S{font-weight:normal;}
.T{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#800000;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;}
.U{margin:0px 0px 0px 0px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;}
.V{margin:0px 0px 0px 0px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:10pt;font-weight:bold;font-style:normal;}
.W{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000080;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;}
.X{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:10pt;font-weight:normal;font-style:normal;background-color:#ffffff;}
.Y{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:11pt;font-weight:normal;font-style:normal;background-color:#ffffff;}
.Z{margin:0px 0px 0px 64px;text-indent:0px;text-align:left;color:#000000;font-family:monospace;font-size:11pt;font-weight:normal;font-style:normal;}
a.l1         { text-decoration:none; font-size: 8pt; font-family: sans-serif; font-weight: normal; }
a.l1:link    { color:#000000; }
a.l1:visited { color:#000080; }
a.l1:hover   { color:#9933CC; }
a.l1:active  { color:#000000; }
a.l2         { text-decoration:none; font-size: 12pt; font-family: sans-serif; font-variant: small-caps; }
a.l2:link    { color:#0066FF; }
a.l2:visited { color:#FF6600; }
a.l2:hover   { color:#BC0624; }
a.l2:active  { color:#BC0024; }

-->
</STYLE>
<META NAME="keywords" CONTENT="framework, toolkit, widget, c++, visual, studio, dev-cpp, builder, ide, class, component,wxwidgets, qt, rapid, application, development, rad, mfc, linux, macos, gui, sdl, directx, desktop"><META name="robots" content="index,follow">
<LINK rel="alternate" type="application/rss+xml" title="SVN changes" href="svnchanges.xml">
<LINK rel="shortcut icon" type="image/png" href="favicon.png">
</HEAD><BODY BGCOLOR="#D2D9D2" ALINK="#800000" LINK="#000000" VLINK="#000080"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%"><TR><TD COLSPAN="3"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%" BGCOLOR="#FFFFFF" style="border: 1px solid #6E89AE;padding-left: 10px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;"><TR><TD><A HREF="index.html"><IMG SRC="0i.png" ALT="" BORDER="0"></A>
</TD>
<TD ALIGN="RIGHT" VALIGN="BOTTOM" STYLE="padding-bottom: 5px; background-image: url('1i.png')"><span style="font-size: 14pt; font-family: sans-serif;"><script type="text/javascript"><!--
google_ad_client = "pub-1082147624384270";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//--></script>
<script type="text/javascript"
  src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
&nbsp;&nbsp;</span>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%"><TR><TD COLSPAN="3" BGCOLOR="#D2D9D2" HEIGHT="6"></TD>
</TR>
<TR><TD VALIGN="TOP" ALIGN="CENTER"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="160"><TR><TD ALIGN="CENTER"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%" BGCOLOR="#FFFFFF" style="border-style: solid; border-width: 1px; border-color: #6E89AE;padding: 0px"><TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px;"><A HREF="www$uppweb$overview$en-us.html" CLASS="l1">Overview</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$examples$en-us.html" CLASS="l1">Examples</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$ss$en-us.html" CLASS="l1">Screenshots</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$comparison$en-us.html" CLASS="l1">Comparisons</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$apps$en-us.html" CLASS="l1">Applications</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$download$en-us.html" CLASS="l1">Download</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$documentation$en-us.html" CLASS="l1">Documentation</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$Tutorials$en-us.html" CLASS="l1">Tutorials</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="app$ide$UppHub$en-us.html" CLASS="l1">UppHub</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$Roadmap$en-us.html" CLASS="l1">Status & Roadmap</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$FAQ$en-us.html" CLASS="l1">FAQ</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="app$ide$About$en-us.html" CLASS="l1">Authors & License</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="https://www.ultimatepp.org/forums" CLASS="l1">Forums</A>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:12px; padding-right:0px; padding-top:6px; padding-bottom:6px; border-top: 1px solid #6E89AE;"><A HREF="www$uppweb$Funding$en-us.html" CLASS="l1">Funding U++</A>
</TD>
</TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%"><TR><TD></TD>
</TR>
</TABLE>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%" BGCOLOR="#FFFFFF" style="border-style: solid; border-width: 1px; border-color: #6E89AE;padding: 0px"><TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('3i.png'); border: 0px solid black;padding-left:12px; padding-right:0px; padding-top:1px; padding-bottom:1px;color:#FFFFFF;"><B><span style="font-size: 8pt; font-family: sans-serif;">Search on this site</span>
</B>
</TD>
</TR>
<TR><TD WIDTH="100%" VALIGN="MIDDLE" STYLE="background-image: url('2i.png'); border: 0px solid black; padding-left:6px; padding-right:0px; padding-top:4px; padding-bottom:4px;border-top: 1px solid #6E89AE;"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%"><TR><TD><IMG SRC="4i.png" ALT="" BORDER="0"></TD>
<TD><FORM ACTION="https://www.google.com/search" METHOD="GET" STYLE="margin:0px;padding:0px;"><INPUT TYPE="HIDDEN" NAME="ie" VALUE="UTF-8"><INPUT TYPE="HIDDEN" NAME="oe" VALUE="UTF-8"><INPUT TYPE="TEXT" NAME="q" SIZE="15" MAXLENGTH="256" placeholder="Site search"><INPUT TYPE="HIDDEN" NAME="sitesearch" VALUE="ultimatepp.org"></FORM>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%"><TR><TD></TD>
</TR>
</TABLE>
<br><div id="fb-root"></div>
<script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="https://www.facebook.com/pages/Upp-Framework/262346610476027?sk=wall" data-send="false" data-layout="button_count" data-width="160" data-show-faces="false" data-font="arial"></div>
<br><br><script type="text/javascript"><!--
google_ad_client = "pub-1082147624384270";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//--></script>
<script type="text/javascript"
  src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script><br><br><script type="text/javascript"><!--
google_ad_client = "pub-1082147624384270";
google_ad_width = 160;
google_ad_height = 90;
google_ad_format = "160x90_0ads_al_s";
google_ad_channel = "";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//--></script>
<script type="text/javascript"
  src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br><br><br><br><br><br><A HREF="https://sourceforge.net/projects/upp/"><IMG SRC="https://sourceforge.net/sflogo.php?group_id=93970&amp;type=2" ALT="SourceForge.net Logo" BORDER="0" WIDTH="125" HEIGHT="37"></A>
<br><br><A HREF="https://flathub.org/en/apps/org.ultimatepp.TheIDE"><IMG SRC="5i.png" ALT="SourceForge.net Logo" BORDER="0" WIDTH="125" HEIGHT="37"></A>
<br><br><div style="background-color:#ffffff;width:125;height:35"><A HREF="https://github.com/ultimatepp"><IMG SRC="6i.png" ALT="GitHub Logo" BORDER="0" WIDTH="125" HEIGHT="35"></A>
</div><br><div style="background-color:#ffffff;width:125;height:35"><div style="height:5"></div><A HREF="https://discord.gg/8XzqQzXZzb"><IMG SRC="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0b5061df29d55a92d945_full_logo_blurple_RGB.svg" ALT="Discord Logo" BORDER="0" WIDTH="125" HEIGHT="25"></A>
</div><br></TD>
</TR>
</TABLE>
</TD>
<TD VALIGN="TOP" BGCOLOR="#D2D9D2"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="6"><TR><TD></TD>
</TR>
</TABLE>
</TD>
<TD VALIGN="TOP" WIDTH="100%" BGCOLOR="#D2D9D2"><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" BGCOLOR="#FFFFFF" WIDTH="100%" style="border-style: solid; border-width: 1px; border-color: #6E89AE;padding: 10px;;"><TR><TD><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%"><TR><TD><p class="C">Network Tutorial</p>
<p class="D">Welcome to the Network Tutorial! In this tutorial, you will learn how to use U++ Core components to enrich your applications with network support. You will also learn how to build server applications that can run locally or be hosted in any public cloud, for example, AWS or Microsoft Azure.</p>
<p class="D">Moreover, the examples attached to this tutorial are bundled with the U++ standard distribution, and they are localized in the tutorial assembly. So, you don't need to rewrite it yourself to launch them or experiment with the code. Good luck!</p>
<p class="D">This is the preview version of the tutorial. All planned content is not yet available.</p>
<hr><p class="E">Table of contents</p>
<p class="A">&nbsp;</p>
<p class="A"><a href="srcdoc$Core$NetworkTutorial_en-us.html#1">1. Obtaining data from REST API via HTTP Request</a></p>
<p class="A"><a href="srcdoc$Core$NetworkTutorial_en-us.html#2">2. Building RESTful server</a></p>
<p class="A">&nbsp;</p>
<hr><p id="1" class="E">1. Obtaining data from REST API via HTTP Request</p>
<p class="D">One of the most popular APIs available now on the internet is the REST API. In this tutorial, you will learn how to use the <a href="src$Core$HttpRequest_en-us.html#HttpRequest::class"><span class="F">HTTPRequest</span></a> class to communicate with such an API and use the obtained data directly in the application.</p>
<p class="D"><span class="F">HTTPRequest</span> is a class that performs synchronous or asynchronous HTTP and <span class="F">HTTPS</span> requests. HTTPS requests are very common today. More than 80% of services use this kind of connection. To support HTTPS in your application, you need to add the <span class="F">Core/SSL</span> package to the project. Without this package, your request will fail during runtime.</p>
<p class="D">In this tutorial will use <a href="https://restcountries.com/">https://restcountries.com</a> publicly available API. This API allows you to &nbsp;explore remote server that holds information about world countries. The API returns data in JSON format. When you open the mentioned page you will have access to the the detailed documentation with all available options. I encourage you to visit it.</p>
<p class="D">For simplification, we will use the <a href="https://gitlab.com/restcountries/restcountries#name">/name</a> resource path to search for countries with the given name. In our case, we will look for Germany and information about its name and capital city.</p>
<p class="D">To perform a request, you need to construct an HttpRequest object and pass a <span class="F">URL</span> as a parameter. After constructing the object, there is a need to indicate the HTTP method that should be used. In our case, we will be using <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET">GET</a>. To select a method, there is a dedicated method called <span class="F">Method</span> that accepts an integer as a parameter. The integers that can be passed are defined within the HttpRequest class. So, the value to perform a GET request should be <span class="F">HttpRequest::METHOD_GET</span>.</p>
<p class="D">main.cpp</p>
<p class="G"><span class="H">#include</span><span class="I"> </span>&lt;<span class="I">Core</span>/<span class="I">Core</span>.<span class="I">h</span>&gt;</p>
<p class="J">&nbsp;</p>
<p class="J"><span class="K">using</span> <span class="K">namespace</span> Upp;</p>
<p class="J">&nbsp;</p>
<p class="J">CONSOLE_APP_MAIN {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="F"><u>HttpRequest http</u></span>(</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="L">&quot;https://restcountries.com/v3.1/name/germany&amp;fields=name,capital&quot;</span>);</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">auto</span> content <span class="M">=</span> <span class="F"><u>http</u></span><span class="K"><u>.</u></span><span class="F"><u>Method(HttpRequest</u></span><span class="K"><u>::</u></span><span class="F"><u>METHOD_GET)</u></span><span class="K"><u>.</u></span><span class="F"><u>Execute()</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(content<span class="M">.</span>IsVoid()) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;Failed to execute GET request wit error code &quot;</span> <span class="M">&lt;&lt;</span> http<span class="M">.</span>GetStatusCode()</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="M">&lt;&lt;</span> <span class="L">&quot;.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>return</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">auto</span> json <span class="M">=</span> ParseJSON(content);</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(json<span class="M">.</span>IsError()) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;Failed to parse JSON response.&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>return</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(json<span class="M">.</span>GetCount() <span class="M">==</span> <span class="L">0</span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;The JSON is empty. HTTP request returns empty countries list.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>return</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="O"><span class="P"> &nbsp;&nbsp;&nbsp;</span>// Let's parse the search results and display them on the terminal.</p>
<p class="J"> &nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;Found countries:</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">for</span>(<span class="K">const</span> <span class="K">auto</span><span class="M">&amp;</span> result <span class="M">:</span> json) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String common_name;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String capital;</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common_name <span class="M">=</span> result<span class="M">[</span><span class="L">&quot;name&quot;</span><span class="M">][</span><span class="L">&quot;common&quot;</span><span class="M">]</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="K">for</span>(<span class="K">const</span> <span class="K">auto</span><span class="M">&amp;</span> result_capital <span class="M">:</span> result<span class="M">[</span><span class="L">&quot;capital&quot;</span><span class="M">]</span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capital <span class="M">=</span> result_capital;</p>
<p class="J">&nbsp;</p>
<p class="O"><span class="P"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>// Some countries like South Africa might have more than one capital city. For this</p>
<p class="O"><span class="P"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>// tutorial, let's ignore it and display only the first result on the list.</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>break</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;- &quot;</span> <span class="M">&lt;&lt;</span> common_name <span class="M">&lt;&lt;</span> <span class="L">&quot; with &quot;</span> <span class="M">&lt;&lt;</span> capital <span class="M">&lt;&lt;</span> <span class="L">&quot; as a capital city.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">}</p>
<p class="D">In this case, the status code should be 200 OK, and the JSON response from the server should look as follows:</p>
<p class="J"><span class="M">[</span>{</p>
<p class="J"> &nbsp;&nbsp;&nbsp;name <span class="M">:</span> {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common <span class="M">:</span> Germany,</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;official <span class="M">:</span> Federal Republic of Germany,</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nativeName <span class="M">:</span> {deu <span class="M">:</span> {official <span class="M">:</span> Bundesrepublik Deutschland, common <span class="M">:</span> Deutschland}}</p>
<p class="J"> &nbsp;&nbsp;&nbsp;},</p>
<p class="G"><span class="I"> &nbsp;&nbsp;&nbsp;capital </span>:<span class="I"> </span>[<span class="I">Berlin</span>]</p>
<p class="G"><span class="I">}</span>]</p>
<p class="D">Also, please note that the <span class="F">.Method(HttpRequest::METHOD_GET)</span> can be simplified to <span class="F">.GET()</span>. The same applies to other methods as well. For example .Method(HttpRequest::METHOD_POST) can be replaced with .POST(). So the following line of code:</p>
<p class="J"><span class="K">auto</span> content <span class="M">=</span> http<span class="M">.</span><span class="F"><u>Method(HttpRequest</u></span><span class="K"><u>::</u></span><span class="F"><u>METHOD_GET)</u></span><span class="M">.</span>Execute();</p>
<p class="D">Is it exactly the same as:</p>
<p class="J"><span class="K">auto</span> content <span class="M">=</span> http<span class="M">.</span><span class="F"><u>GET()</u></span><span class="M">.</span>Execute();</p>
<p class="D">&nbsp;</p>
<hr><p id="2" class="E">2. Building RESTful server</p>
<p class="D">Now, it's time to build our own RESTful server, and don't look at others. In this tutorial, we will build a simple service with one node <span class="F">/countries</span> that will return predefined countries. We need to start by creating a server that will listen on any port that is not yet taken. To do it, let's create a <a href="src$Core$TcpSocket_en-us.html#TcpSocket::class"><span class="F">TcpSocket</span></a> instance and then call the <a href="src$Core$TcpSocket_en-us.html#TcpSocket::Listen(int,int,bool,bool,void*)"><span class="F">Listen</span></a> method. This method, in its simplest form, requires providing a port as an argument. The safe value in this case for development purposes is 8080. Please keep in mind that the default port for <span class="F">HTTP is 80</span> and for <span class="F">HTTPS is 443</span>. In the production enviromenet, these ports must be used. However, in some operating systems, these ports may be blocked by default, and to unlock them, some additional actions might be needed. So, to save ourselves the trouble, we will use a different port.</p>
<p class="D">After that, we will create a loop for our server logic. In each loop iteration, we will handle one request from the client. To do that, there is a need for the creation of a separate <span class="F">TcpSocket</span> instance dedicated to handling that request. To accept an incoming connection from the client, there is a need to call the socket <a href="src$Core$TcpSocket_en-us.html#TcpSocket::class"><span class="F">Accept</span></a><span class="F"> </span>method. The arugmenet to this method is socket. In our case, we need to pass a server socket. The code for this section is implemented in the RunServerLoop() function in the code sample attached to this paragraph.</p>
<p class="D">In the very final step, we will handle the client request. To do that, we need to read the HTTP header provided by the client. The header contains many valuable pieces of information, such as the URI that was passed by the client and the HTTP method that was used. To obtain the header, let's create an <a href="src$Core$HttpHeader_en-us.html#HttpHeader::struct"><span class="F">HttpHeader</span></a> class instance and then call the <a href="src$Core$HttpHeader_en-us.html#HttpHeader::Read(TcpSocket&)"><span class="F">Read</span></a> method, with the socket responsible for handling connections to the client as a parameter. In order to handle client requests, we will need to use the following methods of the HttpHeader class:</p>
<p class="Q"><span class="F">GetURI()</span> - returns URI associated with the header. We will use this information to process client request. Moreover, URI can also contain additional parameteres to the query.</p>
<p class="Q"><span class="F">GetMethod()</span> - returns HTTP method associated with the header.</p>
<p class="D">In the end, to send the response to the client, the <a href="src$Core$Inet_en-us.html#HttpResponse(TcpSocket&,bool,int,const char*,const char*,const String&,const char*,bool)"><span class="F">HttpResponse</span></a> function must be used. To use it properly, you need to provide a client socket, a status code, and optionally, if you don't return error content type and data. After providing parameters, the function will return all specified information directly back to the client.</p>
<p class="D">main.cpp</p>
<p class="G"><span class="H">#include</span><span class="I"> </span>&lt;<span class="I">Core</span>/<span class="I">Core</span>.<span class="I">h</span>&gt;</p>
<p class="J">&nbsp;</p>
<p class="J"><span class="K">using</span> <span class="K">namespace</span> Upp;</p>
<p class="J">&nbsp;</p>
<p class="J"><span class="K">constexpr</span> <span class="K">int</span> SERVER_PORT <span class="M">=</span> <span class="L">8080</span>;</p>
<p class="J">&nbsp;</p>
<p class="J"><span class="K">void</span> ProcessHttpRequest(TcpSocket<span class="M">&amp;</span> client)</p>
<p class="J">{</p>
<p class="R"><span class="S"> &nbsp;&nbsp;&nbsp;</span><u>HttpHeader header;</u></p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(<span class="M">!</span><span class="F"><u>header</u></span><span class="K"><u>.</u></span><span class="F"><u>Read(client)</u></span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cerr() <span class="M">&lt;&lt;</span> <span class="L">&quot;Failed to read HttpHeader.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpResponse(client, <span class="K">false</span>, HttpStatus<span class="M">::</span>BAD_REQUEST);</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>return</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">auto</span> path <span class="M">=</span> <span class="F"><u>header</u></span><span class="K"><u>.</u></span><span class="F"><u>GetURI()</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(<span class="F"><u>header</u></span><span class="K"><u>.</u></span><span class="F"><u>GetMethod()</u></span> <span class="M">==</span> <span class="L">&quot;GET&quot;</span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="K">if</span>(path <span class="M">==</span> <span class="L">&quot;/countries&quot;</span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JsonArray ja;</p>
<p class="T"><span class="I"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ja </span><span class="M">&lt;&lt;</span><span class="I"> </span>&quot;Czech Republic&quot;</p>
<p class="T"><span class="I"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="M">&lt;&lt;</span><span class="I"> </span>&quot;Indonesia&quot;</p>
<p class="T"><span class="I"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="M">&lt;&lt;</span><span class="I"> </span>&quot;Brazil&quot;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="M">&lt;&lt;</span> <span class="L">&quot;France&quot;</span>;</p>
<p class="J">&nbsp;</p>
<p class="U"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="K">auto</span> code <span class="M">=</span> HttpStatus<span class="M">::</span>OK;</p>
<p class="V"><span class="S"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><u>HttpResponse(client, </u><span class="M"><u>false</u></span><u>, code, HttpStatus</u><span class="M"><u>::</u></span><u>ToString(code), </u><span class="L"><u>&quot;application/json&quot;</u></span><u>,</u></p>
<p class="J"><span class="F"><u> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ja</u></span><span class="K"><u>.</u></span><span class="F"><u>ToString())</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;HttpResponse(client, <span class="K">false</span>, HttpStatus<span class="M">::</span>NOT_FOUND);</p>
<p class="J">}</p>
<p class="J">&nbsp;</p>
<p class="J"><span class="K">void</span> RunServerLoop(TcpSocket<span class="M">&amp;</span> server)</p>
<p class="J">{</p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">for</span>(;;) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TcpSocket client;</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cout() <span class="M">&lt;&lt;</span> <span class="L">&quot;Waiting for incoming connection from the client...</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="K">if</span>(<span class="M">!</span><span class="F"><u>client</u></span><span class="K"><u>.</u></span><span class="F"><u>Accept(server)</u></span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cerr() <span class="M">&lt;&lt;</span> <span class="L">&quot;Connection from the client not accepted.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>continue</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcessHttpRequest(client);</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">}</p>
<p class="J">&nbsp;</p>
<p class="J">CONSOLE_APP_MAIN</p>
<p class="J">{</p>
<p class="R"><span class="S"> &nbsp;&nbsp;&nbsp;</span><u>TcpSocket server;</u></p>
<p class="J"> &nbsp;&nbsp;&nbsp;<span class="K">if</span>(<span class="M">!</span><span class="F"><u>server</u></span><span class="K"><u>.</u></span><span class="F"><u>Listen(SERVER_PORT)</u></span>) {</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cerr() <span class="M">&lt;&lt;</span> <span class="L">&quot;Cannot open server port for listening with error </span><span class="M">\&quot;</span><span class="L">&quot;</span> <span class="M">&lt;&lt;</span> server<span class="M">.</span>GetErrorDesc()</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="M">&lt;&lt;</span> <span class="L">&quot;</span><span class="M">\&quot;</span><span class="L">.</span><span class="M">\n</span><span class="L">&quot;</span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="N"><u>return</u></span>;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;}</p>
<p class="J">&nbsp;</p>
<p class="J"> &nbsp;&nbsp;&nbsp;RunServerLoop(server);</p>
<p class="J">}</p>
<p class="D">In the recent version of the U++ framework (2024.1), the HttpStatus codes were introduced. It means that you don't longer need to provide an explicit status code and prhase to HttpRepsonse. So,</p>
<p class="A">&nbsp;</p>
<p class="J">HttpResponse(client, <span class="K">false</span>, HttpStatus<span class="M">::</span>NOT_FOUND);</p>
<p class="A">&nbsp;</p>
<p class="D">is the eqivalent to:</p>
<p class="A">&nbsp;</p>
<p class="W"><span class="I">HttpResponse(client, </span><span class="K">false</span>, <span class="L">404</span>, <span class="L">&quot;Not Found&quot;</span>);</p>
<p class="A">&nbsp;</p>
<p class="D">To test the above example a <a href="https://curl.se/"><span class="F">curl</span></a> terminal application can be used. This application is bundled with most Linux distributions, and it can be easily downloaded for Windows. The command that should be run in the terminal is as follows:</p>
<p class="X">curl -v http://127.0.0.1:8080/countries</p>
<p class="D">The output of the command should be:</p>
<p class="Y">* &nbsp;&nbsp;Trying 127.0.0.1:8080...</p>
<p class="Z">* Connected to 127.0.0.1 (127.0.0.1) port 8080</p>
<p class="Z">&gt; GET /countries HTTP/1.1</p>
<p class="Z">&gt; Host: 127.0.0.1:8080</p>
<p class="Z">&gt; User-Agent: curl/8.4.0</p>
<p class="Z">&gt; Accept: */*</p>
<p class="Z">&gt; &nbsp;</p>
<p class="Z">&lt; HTTP/1.1 200 OK</p>
<p class="Z">&lt; Date: Sun, 3 Dec 2023 12:19:02 +0100</p>
<p class="Z">&lt; Server: U++ based server</p>
<p class="Z">&lt; Connection: close</p>
<p class="Z">&lt; Content-Length: 48</p>
<p class="Z">&lt; Content-Type: application/json</p>
<p class="Z">&lt; &nbsp;</p>
<p class="Z">* Closing connection</p>
<p class="Z">[&quot;Czech Republic&quot;,&quot;Indonesia&quot;,&quot;Brazil&quot;,&quot;France&quot;]</p>
<p class="J">&nbsp;</p>
<p class="D">As you can see in the above output, we received our desirable response. The <span class="F">-v</span> parameter stands for verbose mode, and it is supposed to show additional information. It is very helpful for debugging purposes. Without this parameter, the output is:</p>
<p class="X">[&quot;Czech Republic&quot;,&quot;Indonesia&quot;,&quot;Brazil&quot;,&quot;France&quot;]</p>
<p class="D">&nbsp;</p>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%"><TR><TD></TD>
</TR>
</TABLE>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" BGCOLOR="#FFFFFF" WIDTH="100%" style="border-style: solid; border-width: 1px; border-color: #6E89AE;padding: 10px;;"><TR><TD><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0" WIDTH="100%"><TR><TD><p class="A"><span class="B"> </span><a href="www$uppweb$contribweb$en-us.html">Do you want to contribute?</a></p>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
<script type="text/javascript">var a={};var p=window.location.pathname.split("/");p=p[p.length-1];var s='<select id="lang" onchange="window.location=document.getElementById(\'lang\').value;">';for(l in a){if(p==l){d=" selected=1"}else{d=""}s+='<option value="'+l+'"'+d+'>'+a[l]+'</option>'}s+='</select>';var d=document.createElement('div');d.innerHTML=s;var c=document.getElementById('langs');c.replaceChild(d,c.firstChild);document.getElementById('langbox').style.display='block';</script></BODY>
